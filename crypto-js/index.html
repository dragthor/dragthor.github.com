<html>
<head>
	<title>cryto-js</title>
	
	<style>
		body {
			background-color: #B0C4DE; 
			font-family:verdana,arial,helvetica,sans-serif;
		}
		input, textarea {
			border-color: #000;
			border-width: 1px;
			border-style: solid;
			padding: 10px;
		}
	</style>
	
	<script type="text/javascript" src="aes.js"></script>	 <!-- 3.1.2 -->
</head>

<body>
	<div style="float: right">
		<input type="button" id="btnEncrypt" value="Encrypt" onclick="encrypt()" />
		<input type="button" id="btnDecrypt" value="Decrypt" onclick="decrypt()" />

		<input type="password" id="txtPassphrase" maxlength="50" />
	</div>
	
	<div>
		<textarea id="txtInput" style="width: 400px; height: 350px;"></textarea>
	</div>
	
	<script type="text/javascript">
		function encrypt() {
			var phrase = document.getElementById("txtPassphrase");
			var secret = document.getElementById("txtInput");
			var phrasef = phrase.value.trim();
			var secretf = secret.value.trim();
			
			if (phrasef.length > 0 && secretf.length > 0) {
				secret.value = CryptoJS.AES.encrypt(secretf, phrasef);
			}		
		}

		function decrypt() {
			var phrase = document.getElementById("txtPassphrase");
			var secret = document.getElementById("txtInput");
			var phrasef = phrase.value.trim();
			var secretf = secret.value.trim();
			
			if (phrasef.length > 0 && secretf.length > 0) {
				var result = CryptoJS.AES.decrypt(secretf, phrasef).toString(CryptoJS.enc.Utf8);
				
				secret.value = result;
			}
		}
	</script>
</body>
</html>